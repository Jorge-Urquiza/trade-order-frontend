<section class="page-container">
  <app-page-header
    title="FX Replay - Trade Orders"

  >
    <div actions>
      <button
        pButton
        type="button"
        label="New Trade"
        icon="pi pi-plus"
        severity="success"
        (click)="openNewTradeDialog()"
      ></button>
    </div>
  </app-page-header>

  <p-card>
    <p-table
      [value]="trades"
      [loading]="loading"
      [rows]="10"
      [paginator]="true"
      [tableStyle]="{ 'min-width': '72rem' }"
      [rowTrackBy]="trackByTradeId"
    >
      <ng-template #header>
        <tr>
          <th>#</th>
          <th>Pair</th>
          <th>Side</th>
          <th>Type</th>
          <th>Amount</th>
          <th>Price</th>
          <th>Status</th>
          <!-- <th>Created At</th>
          <th>Updated At</th> -->
          <th>Action</th>
        </tr>
      </ng-template>

      <ng-template #body let-trade let-rowIndex="rowIndex">
        <tr>
          <td>{{ rowIndex + 1 }}</td>
          <td>{{ trade.pair }}</td>
          <td>
            <p-tag [severity]="sideSeverity(trade.side)" [value]="trade.side | uppercase"></p-tag>
          </td>
          <td>
            <p-tag [severity]="typeSeverity(trade.type)" [value]="trade.type | uppercase"></p-tag>
          </td>
          <td>{{ trade.amount | number: '1.2-2' }}</td>
          <td>{{ formatPrice(trade.price) }}</td>
          <td>
            <p-tag [severity]="statusSeverity(trade.status)" [value]="trade.status | uppercase"></p-tag>
          </td>
          <!-- <td>{{ trade.createdAt | date: 'medium' }}</td>
          <td>{{ trade.updatedAt | date: 'medium' }}</td> -->
          <td>
            <div class="action-buttons">
              <button
                pButton
                type="button"
                icon="pi pi-pencil"
                label="Edit"
                severity="secondary"
                size="small"
                (click)="openEditTradeDialog(trade)"
              ></button>
              <button
                pButton
                type="button"
                icon="pi pi-trash"
                label="Delete"
                severity="danger"
                size="small"
                [loading]="deletingTradeId === trade.id"
                [disabled]="deletingTradeId !== null && deletingTradeId !== trade.id"
                (click)="deleteTrade(trade)"
              ></button>
            </div>
          </td>
        </tr>
      </ng-template>

      <ng-template #emptymessage>
        <tr>
          <td colspan="8" class="empty-cell">
            <div class="empty-state">
              <i class="pi pi-inbox"></i>
              <span>No trade orders found.</span>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
</section>
